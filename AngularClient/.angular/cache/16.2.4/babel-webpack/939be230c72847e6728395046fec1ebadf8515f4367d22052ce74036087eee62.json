{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { YearS } from '../student.model';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { AppStudings } from '../studing.model';\nexport let SingleStudentDetailsComponent = class SingleStudentDetailsComponent {\n  get student() {\n    return this._student;\n  }\n  set student(value) {\n    this._student = value;\n    if (this._student != undefined) {\n      this.studentForm = new FormGroup({\n        \"id\": new FormControl(this._student.id, Validators.required),\n        \"name\": new FormControl(this._student.name, [Validators.required, Validators.minLength(2)]),\n        \"family\": new FormControl(this._student.family, [Validators.required, Validators.minLength(2)]),\n        \"addres\": new FormControl(this._student.addres),\n        \"phon\": new FormControl(this._student.phon, [Validators.minLength(9), Validators.maxLength(10)]),\n        \"mail\": new FormControl(this._student.mail, [Validators.email]),\n        \"avg\": new FormControl(this._student.avg),\n        \"dateLeave\": new FormControl(this._student.dateLeave),\n        \"year\": new FormControl(this._student.year),\n        \"test\": new FormControl(this._student.tests)\n      });\n      this.startMissingDate = this.studentForm.controls['dateStart'].value;\n      this.numMissingDays = this.studentForm.controls['numMissingDays'].value;\n    }\n  }\n  ngOnInit() {}\n  saveNewStudent() {\n    this.onDeleateStudent.emit(this._student);\n    this._student = this.studentForm.value;\n    if (this.numMissingDays && this.numMissingDays > 0) this._student?.absenceDays?.push({\n      dateStart: this.startMissingDate,\n      numDays: this.numMissingDays\n    });\n    if (this.dateLeave != undefined) {\n      this._student?.active ? this._student.active = false : true;\n    }\n    this.sS?.addStudents(this._student).subscribe(succeed => alert(\"succeed\"), err => {\n      console.log(\"err\");\n    });\n    alert(\"ההוספה בוצעה בהצלחה\");\n    alert(this._student?.addres + \"\" + this._student?.avg + \"\" + this._student?.family + \"\" + this._student?.id + \"\" + this._student?.name + \"\" + this._student?.phon);\n    this.onSaveNewStudent.emit(this._student);\n    this._router.navigate([\"/students\", student.id]);\n  }\n  constructor(_sumDaysH, _studentService, _router) {\n    this._sumDaysH = _sumDaysH;\n    this._studentService = _studentService;\n    this._router = _router;\n    this.year = YearS;\n    this.studingList = AppStudings;\n    this.studentForm = new FormGroup({});\n    this.onSaveNewStudent = new EventEmitter();\n    this.onDeleateStudent = new EventEmitter();\n    this.sS = _studentService;\n    this.sumDays = _sumDaysH.getSum(this._student?.id);\n  }\n};\n__decorate([Input()], SingleStudentDetailsComponent.prototype, \"student\", null);\n__decorate([Output()], SingleStudentDetailsComponent.prototype, \"onSaveNewStudent\", void 0);\n__decorate([Output()], SingleStudentDetailsComponent.prototype, \"onDeleateStudent\", void 0);\nSingleStudentDetailsComponent = __decorate([Component({\n  selector: 'single-student-details',\n  templateUrl: './single-student-details.component.html',\n  styleUrls: ['./single-student-details.component.scss']\n})], SingleStudentDetailsComponent);","map":{"version":3,"names":["Component","EventEmitter","Input","Output","YearS","FormControl","FormGroup","Validators","AppStudings","SingleStudentDetailsComponent","student","_student","value","undefined","studentForm","id","required","name","minLength","family","addres","phon","maxLength","mail","email","avg","dateLeave","year","tests","startMissingDate","controls","numMissingDays","ngOnInit","saveNewStudent","onDeleateStudent","emit","absenceDays","push","dateStart","numDays","active","sS","addStudents","subscribe","succeed","alert","err","console","log","onSaveNewStudent","_router","navigate","constructor","_sumDaysH","_studentService","studingList","sumDays","getSum","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\מיכל גבאי\\תכנות\\אנגולר\\firstProject\\src\\app\\modules\\students\\single-student-details\\single-student-details.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Student, YearS } from '../student.model';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { AppStudings, Studying } from '../studing.model';\nimport { SumDaysH } from '../sumDaysH.service';\nimport { studentService } from '../studentService.service';\n@Component({\n  selector: 'single-student-details',\n  templateUrl: './single-student-details.component.html',\n  styleUrls: ['./single-student-details.component.scss']\n})\nexport class SingleStudentDetailsComponent {\n  sS?:studentService;\n  year = YearS;\n  private _student?: Student;\n  studingList: Studying[] = AppStudings;\n  dateLeave:Date | undefined;\n  sumDays:number;\n  studentForm: FormGroup = new FormGroup({});\n  startMissingDate: Date | undefined;\n  numMissingDays: number | undefined;\n totalMissingDate: number|undefined;\n  public get student(): Student | undefined {\n    return this._student;\n  }\n  @Input()\n  public set student(value: Student | undefined) {\n    this._student = value;\n    if (this._student != undefined) {\n      this.studentForm = new FormGroup({\n        \"id\": new FormControl(this._student.id, Validators.required),\n        \"name\": new FormControl(this._student.name, [Validators.required, Validators.minLength(2)]),\n        \"family\": new FormControl(this._student.family, [Validators.required, Validators.minLength(2)]),\n        \"addres\": new FormControl(this._student.addres),\n        \"phon\": new FormControl(this._student.phon, [Validators.minLength(9), Validators.maxLength(10)]),\n        \"mail\": new FormControl(this._student.mail, [Validators.email]),\n        \"avg\": new FormControl(this._student.avg),\n        \"dateLeave\": new FormControl(this._student.dateLeave),\n        \"year\": new FormControl(this._student.year),\n        \"test\": new FormControl(this._student.tests)\n      });\n      this.startMissingDate=this.studentForm.controls['dateStart'].value;\n      this.numMissingDays=this.studentForm.controls['numMissingDays'].value;\n    }\n  }\n  ngOnInit(): void {\n\n  }\n\n  @Output()\n  onSaveNewStudent: EventEmitter<Student> = new EventEmitter();\n  @Output()\n  onDeleateStudent: EventEmitter<Student> = new EventEmitter();\n\n  saveNewStudent() {\n    this.onDeleateStudent.emit(this._student);\n    this._student = this.studentForm.value;\n    if(this.numMissingDays&&this.numMissingDays>0)\n    this._student?.absenceDays?.push({dateStart:this.startMissingDate,numDays:this.numMissingDays});\n    if(this.dateLeave!=undefined){\n    this._student?.active? this._student.active=false:true;\n    }\n    \n    this.sS?.addStudents(this._student).subscribe(succeed=>alert(\"succeed\"),err=>{console.log(\"err\")});\n    alert(\"ההוספה בוצעה בהצלחה\");\n    alert(this._student?.addres + \"\" + this._student?.avg + \"\" + this._student?.family + \"\" + this._student?.id + \"\" + this._student?.name + \"\" + this._student?.phon);\n    this.onSaveNewStudent.emit(this._student);\n    this._router.navigate([\"/students\",student.id]);\n  }\n\n  constructor(private _sumDaysH: SumDaysH,private _studentService:studentService,private _router:Router ){\n    this.sS=_studentService;\n  this.sumDays=_sumDaysH.getSum(this._student?.id);\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}